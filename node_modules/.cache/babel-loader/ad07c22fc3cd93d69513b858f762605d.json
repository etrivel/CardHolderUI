{"ast":null,"code":"var _jsxFileName = \"C:\\\\Office Work\\\\FIS\\\\CardHolderUI\\\\src\\\\components\\\\welcome\\\\index.js\";\nimport React from \"react\";\nimport { Grid, Container, Typography } from \"@material-ui/core\";\nimport { withRouter } from \"react-router-dom\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport axios from \"axios\";\nimport config from \"../../config\";\nimport jwt from \"jsonwebtoken\";\nimport moment from \"moment\"; // style\n\nconst styles = theme => ({\n  root: {\n    width: \"100%\",\n    background: theme.palette.mainbackground.default,\n    padding: \"10px 0px\",\n    [theme.breakpoints.down(\"xs\")]: {\n      padding: \"70px 0px\"\n    }\n  },\n  rootCard: {\n    // backgroundImage: `url(\"../assets/Mask Group 2.png\")`,\n    // backgroundImage: `url(\"/assets/business-woman-hand-typing-laptop-keyboard-with-financial-cha.png\")`,\n    backgroundImage: `url(\"${process.env.PUBLIC_URL}/assets/business-woman-hand-typing-laptop-keyboard-with-financial-cha.png\")`,\n    backgroundPosition: \"center\",\n    // backgroundSize: 'cover',\n    backgroundRepeat: \"no-repeat\",\n    borderRadius: 16,\n    boxShadow: \"0px 35px 50px #70707028 !important\",\n    padding: \"86px 40px\",\n    // margin: \"40px\",\n    [theme.breakpoints.down(\"xs\")]: {\n      margin: \"0px\",\n      padding: \"66px 40px\"\n    }\n  },\n  illustrator: {\n    opacity: 0.9,\n    textAlign: \"center\",\n    background: \"#FFFFFF 0% 0% no-repeat padding-box\",\n    boxShadow: \"0px 5px 10px #00000029\",\n    borderRadius: \"16px\",\n    padding: 60,\n    [theme.breakpoints.down(\"xs\")]: {\n      padding: \"30px 20px\"\n    }\n  },\n  illustratorGrid: {// borderRight: `1px solid ${theme.palette.mainbackground.default}`,\n  },\n  mainContent: {\n    display: \"flex\",\n    alignItems: \"center\"\n  },\n  Welcome: {\n    color: theme.palette.primary.main,\n    fontSize: 22,\n    fontWeight: 600\n  },\n  username: {\n    opacity: 0.9,\n    fontWeight: 600\n  },\n  userid: {\n    fontSize: 16,\n    opacity: 0.8,\n    marginTop: 8\n  },\n  img: {\n    width: \"100%\",\n    height: \"100%\",\n    [theme.breakpoints.down(\"xs\")]: {\n      marginTop: 40\n    }\n  }\n}); // end\n\n\nconst loginUser = localStorage.getItem('CH_user_decode') ? JSON.parse(atob(localStorage.getItem('CH_user_decode'))) : {};\n\nclass Welcome extends React.Component {\n  // state\n  constructor(props) {\n    super(props);\n    this.state = {\n      valueData: \"\"\n    };\n  } // end\n\n\n  async componentDidMount() {\n    debugger;\n    const locationPath = new URLSearchParams(this.props.location.search || this.props.match.params.id_token).get(\"id_token\"); // btoa Encode\n    // atob Dccode\n\n    const id_Token = jwt.decode(locationPath);\n\n    if (id_Token) {\n      let expires_in = id_Token === null || id_Token === void 0 ? void 0 : id_Token.expires_in; // if (id_Token) {\n      //   axios\n      //     .get(`${config.api_url}api/v1/users/${id_Token?.sub}`)\n      //     .then((res) => {\n      //       if (res.data) {\n      //         const valData = res?.data;\n      //         this.setState({\n      //           ...this.state,\n      //           valueData: valData,\n      //         });\n      //       }\n      //     })\n      //     .catch((error) => {\n      //       this.setState({\n      //         errdata: error.message,\n      //       });\n      //     });\n      // }\n\n      sessionStorage.setItem('CH_expires_in', expires_in);\n      localStorage.setItem('CH_id_token', locationPath);\n      localStorage.setItem('CH_sessionTimeout', Date.now());\n      axios.get(`https://iasuat.fisglobal.com/cardholderservice/api/v1/users/${id_Token === null || id_Token === void 0 ? void 0 : id_Token.sub}`) // ${id_Token?.sub}\n      .then(async res => {\n        if (res.data) {\n          var _data$, _data$2, _data$3, _data$4, _data$5, _data$6, _data$7, _data$8;\n\n          const data = res.data;\n          await axios.get(`${'https://iasuat.fisglobal.com/userservice/'}api/v1/institution`).then(resp => {\n            if (resp.data) {\n              var _resp$data, _valData$;\n\n              const valData = resp === null || resp === void 0 ? void 0 : (_resp$data = resp.data) === null || _resp$data === void 0 ? void 0 : _resp$data.filter(v => (v === null || v === void 0 ? void 0 : v.instId) === (data === null || data === void 0 ? void 0 : data.institutionId));\n              data.instCode = valData === null || valData === void 0 ? void 0 : (_valData$ = valData[0]) === null || _valData$ === void 0 ? void 0 : _valData$.instcode;\n            }\n          }).catch(err => {\n            console.log(\"get institutions\", err);\n          });\n          this.setState({ ...data,\n            ...this.state.valueData,\n            statevalue: data.state\n          });\n          localStorage.setItem(\"CH_user_decode\", btoa(JSON.stringify(data))); //localStorage.setItem(\"custCode\", this.state.valueData.custCode);\n          //localStorage.setItem(\"userIds\", this.state.valueData.userId);\n\n          localStorage.setItem('CH_accessToken', id_Token === null || id_Token === void 0 ? void 0 : id_Token.accessToken); // localStorage.setItem(\"instCode\", this.state.valueData.instCode);\n\n          localStorage.setItem(\"CH_custCode\", data === null || data === void 0 ? void 0 : (_data$ = data[0]) === null || _data$ === void 0 ? void 0 : _data$.custCode);\n          localStorage.setItem(\"CH_userIds\", data === null || data === void 0 ? void 0 : (_data$2 = data[0]) === null || _data$2 === void 0 ? void 0 : _data$2.userId);\n          localStorage.setItem(\"CH_instCode\", data === null || data === void 0 ? void 0 : (_data$3 = data[0]) === null || _data$3 === void 0 ? void 0 : _data$3.instCode);\n          localStorage.setItem(\"CH_groupId\", data === null || data === void 0 ? void 0 : (_data$4 = data[0]) === null || _data$4 === void 0 ? void 0 : _data$4.userGroupId);\n          localStorage.setItem(\"CH_userId\", data === null || data === void 0 ? void 0 : (_data$5 = data[0]) === null || _data$5 === void 0 ? void 0 : _data$5.userId);\n          localStorage.setItem(\"CH_institutionId\", data === null || data === void 0 ? void 0 : (_data$6 = data[0]) === null || _data$6 === void 0 ? void 0 : _data$6.institutionId);\n          localStorage.setItem(\"CH_lastmodify\", data === null || data === void 0 ? void 0 : (_data$7 = data[0]) === null || _data$7 === void 0 ? void 0 : _data$7.lastModifiedDate); // localStorage.setItem(\"lastmodify\", data?.[0]?.lastModifiedDate);\n\n          localStorage.setItem(\"CH_vpanNo\", data === null || data === void 0 ? void 0 : (_data$8 = data[0]) === null || _data$8 === void 0 ? void 0 : _data$8.vpanNo);\n\n          if ((data === null || data === void 0 ? void 0 : data.length) === 0) {\n            this.props.history.push({\n              pathname: \"/404\",\n              state: {\n                isErr: true\n              }\n            });\n          } else {\n            window.location.href = \"/cardholder/welcome\";\n          }\n        }\n      }).catch(err => {\n        console.log(\"Profile(Login page inside) details\", err);\n      });\n    } // else {\n    //   if (localStorage.getItem(\"CH_userId\")) {\n    //     window.location.href =\n    //       \"https://infinity.dev.fiscloudservices.com/idp/SMYNT/?response_type=id_token&client_id=CORTEXPORTAL&scope=openid&state=https://iasuat.fisglobal.com/bbo/api/v1/users/welcome&redirect_uri=https://iasuat.fisglobal.com/bbo/api/v1/users/welcome\";\n    //   }\n    // }\n    // console.log(loginUser)\n\n  }\n\n  render() {\n    var _loginUser$, _loginUser$2, _loginUser$3;\n\n    const {\n      classes\n    } = this.props;\n    return /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      className: classes.root,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      maxWidth: \"lg\",\n      style: {\n        margin: \"auto\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: classes.rootCard,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      item: true,\n      xs: 12,\n      className: classes.mainContent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 6,\n      className: classes.illustratorGrid,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      className: classes.illustrator,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h5\",\n      className: classes.Welcome,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 19\n      }\n    }, \"Welcome\"), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h4\",\n      className: classes.username,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 19\n      }\n    }, (loginUser === null || loginUser === void 0 ? void 0 : (_loginUser$ = loginUser[0]) === null || _loginUser$ === void 0 ? void 0 : _loginUser$.firstName) + ' ' + (loginUser === null || loginUser === void 0 ? void 0 : (_loginUser$2 = loginUser[0]) === null || _loginUser$2 === void 0 ? void 0 : _loginUser$2.lastName)), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h6\",\n      className: classes.userid,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 19\n      }\n    }, \"Last Login: \", moment(loginUser === null || loginUser === void 0 ? void 0 : (_loginUser$3 = loginUser[0]) === null || _loginUser$3 === void 0 ? void 0 : _loginUser$3.lastLogin).format('MMMM Do YYYY, h:mm'))))))));\n  }\n\n}\n\nexport default withStyles(styles)(withRouter(Welcome));","map":{"version":3,"sources":["C:/Office Work/FIS/CardHolderUI/src/components/welcome/index.js"],"names":["React","Grid","Container","Typography","withRouter","withStyles","Card","axios","config","jwt","moment","styles","theme","root","width","background","palette","mainbackground","default","padding","breakpoints","down","rootCard","backgroundImage","process","env","PUBLIC_URL","backgroundPosition","backgroundRepeat","borderRadius","boxShadow","margin","illustrator","opacity","textAlign","illustratorGrid","mainContent","display","alignItems","Welcome","color","primary","main","fontSize","fontWeight","username","userid","marginTop","img","height","loginUser","localStorage","getItem","JSON","parse","atob","Component","constructor","props","state","valueData","componentDidMount","locationPath","URLSearchParams","location","search","match","params","id_token","get","id_Token","decode","expires_in","sessionStorage","setItem","Date","now","sub","then","res","data","resp","valData","filter","v","instId","institutionId","instCode","instcode","catch","err","console","log","setState","statevalue","btoa","stringify","accessToken","custCode","userId","userGroupId","lastModifiedDate","vpanNo","length","history","push","pathname","isErr","window","href","render","classes","firstName","lastName","lastLogin","format"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Grid, Container, Typography } from \"@material-ui/core\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport axios from \"axios\";\r\nimport config from \"../../config\";\r\nimport jwt from \"jsonwebtoken\"\r\nimport moment from \"moment\";\r\n\r\n// style\r\nconst styles = (theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    background: theme.palette.mainbackground.default,\r\n    padding: \"10px 0px\",\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      padding: \"70px 0px\",\r\n    },\r\n  },\r\n  rootCard: {\r\n    // backgroundImage: `url(\"../assets/Mask Group 2.png\")`,\r\n    // backgroundImage: `url(\"/assets/business-woman-hand-typing-laptop-keyboard-with-financial-cha.png\")`,\r\n    backgroundImage: `url(\"${process.env.PUBLIC_URL}/assets/business-woman-hand-typing-laptop-keyboard-with-financial-cha.png\")`,\r\n    backgroundPosition: \"center\",\r\n    // backgroundSize: 'cover',\r\n    backgroundRepeat: \"no-repeat\",\r\n    borderRadius: 16,\r\n    boxShadow: \"0px 35px 50px #70707028 !important\",\r\n    padding: \"86px 40px\",\r\n    // margin: \"40px\",\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      margin: \"0px\",\r\n      padding: \"66px 40px\",\r\n    },\r\n  },\r\n  illustrator: {\r\n    opacity: 0.9,\r\n    textAlign: \"center\",\r\n    background: \"#FFFFFF 0% 0% no-repeat padding-box\",\r\n    boxShadow: \"0px 5px 10px #00000029\",\r\n    borderRadius: \"16px\",\r\n    padding: 60,\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      padding: \"30px 20px\",\r\n    },\r\n  },\r\n  illustratorGrid: {\r\n    // borderRight: `1px solid ${theme.palette.mainbackground.default}`,\r\n  },\r\n  mainContent: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n  },\r\n  Welcome: {\r\n    color: theme.palette.primary.main,\r\n    fontSize: 22,\r\n    fontWeight: 600,\r\n  },\r\n  username: {\r\n    opacity: 0.9,\r\n    fontWeight: 600,\r\n  },\r\n  userid: {\r\n    fontSize: 16,\r\n    opacity: 0.8,\r\n    marginTop: 8,\r\n  },\r\n  img: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      marginTop: 40,\r\n    },\r\n  },\r\n});\r\n// end\r\nconst loginUser = localStorage.getItem('CH_user_decode') ? JSON.parse(atob(localStorage.getItem('CH_user_decode'))) : {};\r\n\r\nclass Welcome extends React.Component {\r\n  // state\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      valueData: \"\"\r\n    };\r\n  }\r\n  // end\r\n\r\n\r\n  async componentDidMount() {\r\n    debugger\r\n    const locationPath = new URLSearchParams(this.props.location.search ||\r\n      this.props.match.params.id_token).get(\"id_token\")\r\n    // btoa Encode\r\n    // atob Dccode\r\n    const id_Token = jwt.decode(locationPath)\r\n\r\n    if (id_Token) {\r\n    let expires_in = id_Token?.expires_in;\r\n      // if (id_Token) {\r\n      //   axios\r\n      //     .get(`${config.api_url}api/v1/users/${id_Token?.sub}`)\r\n      //     .then((res) => {\r\n      //       if (res.data) {\r\n      //         const valData = res?.data;\r\n      //         this.setState({\r\n      //           ...this.state,\r\n      //           valueData: valData,\r\n      //         });\r\n      //       }\r\n\r\n      //     })\r\n      //     .catch((error) => {\r\n      //       this.setState({\r\n      //         errdata: error.message,\r\n      //       });\r\n      //     });\r\n      // }\r\n      sessionStorage.setItem('CH_expires_in', expires_in)\r\n      localStorage.setItem('CH_id_token', locationPath);\r\n      localStorage.setItem('CH_sessionTimeout', Date.now());\r\n      axios\r\n        .get(`https://iasuat.fisglobal.com/cardholderservice/api/v1/users/${id_Token?.sub}`)\r\n        // ${id_Token?.sub}\r\n        .then(async (res) => {\r\n          if (res.data) {\r\n            const data = res.data;\r\n            await axios\r\n              .get(`${'https://iasuat.fisglobal.com/userservice/'}api/v1/institution`)\r\n              .then((resp) => {\r\n                if (resp.data) {\r\n                  const valData = resp?.data?.filter(v => v?.instId === data?.institutionId);\r\n                  data.instCode = valData?.[0]?.instcode;\r\n                }\r\n              })\r\n              .catch((err) => {\r\n                console.log(\"get institutions\", err);\r\n              });\r\n\r\n            this.setState({\r\n              ...data,\r\n              ...this.state.valueData,\r\n              statevalue: data.state,\r\n            });\r\n\r\n            localStorage.setItem(\"CH_user_decode\", btoa(JSON.stringify(data)));\r\n            //localStorage.setItem(\"custCode\", this.state.valueData.custCode);\r\n            //localStorage.setItem(\"userIds\", this.state.valueData.userId);\r\n            localStorage.setItem('CH_accessToken', id_Token?.accessToken);\r\n            // localStorage.setItem(\"instCode\", this.state.valueData.instCode);\r\n            localStorage.setItem(\"CH_custCode\", data?.[0]?.custCode);\r\n            localStorage.setItem(\"CH_userIds\", data?.[0]?.userId);\r\n            localStorage.setItem(\"CH_instCode\", data?.[0]?.instCode);\r\n            localStorage.setItem(\"CH_groupId\", data?.[0]?.userGroupId);\r\n            localStorage.setItem(\"CH_userId\", data?.[0]?.userId);\r\n            localStorage.setItem(\"CH_institutionId\", data?.[0]?.institutionId);\r\n            localStorage.setItem(\"CH_lastmodify\", data?.[0]?.lastModifiedDate);\r\n            // localStorage.setItem(\"lastmodify\", data?.[0]?.lastModifiedDate);\r\n            localStorage.setItem(\"CH_vpanNo\", data?.[0]?.vpanNo);\r\n            if (data?.length === 0) {\r\n              this.props.history.push({\r\n                pathname: \"/404\",\r\n                state: {\r\n                  isErr: true\r\n                }\r\n              })\r\n            } else {\r\n              window.location.href = \"/cardholder/welcome\"\r\n            }\r\n\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"Profile(Login page inside) details\", err);\r\n        });\r\n    }\r\n    // else {\r\n    //   if (localStorage.getItem(\"CH_userId\")) {\r\n    //     window.location.href =\r\n    //       \"https://infinity.dev.fiscloudservices.com/idp/SMYNT/?response_type=id_token&client_id=CORTEXPORTAL&scope=openid&state=https://iasuat.fisglobal.com/bbo/api/v1/users/welcome&redirect_uri=https://iasuat.fisglobal.com/bbo/api/v1/users/welcome\";\r\n    //   }\r\n    // }\r\n    // console.log(loginUser)\r\n  };\r\n\r\n  render() {\r\n\r\n    const { classes } = this.props;\r\n    return (\r\n      <Grid container className={classes.root}>\r\n        <Container maxWidth=\"lg\" style={{ margin: \"auto\" }}>\r\n          {/* Card Component in welcome page*/}\r\n          <Card className={classes.rootCard}>\r\n            <Grid container item xs={12} className={classes.mainContent}>\r\n              <Grid item xs={12} sm={6} className={classes.illustratorGrid}>\r\n                <Grid item xs={12} className={classes.illustrator}>\r\n                  <Typography variant=\"h5\" className={classes.Welcome}>\r\n                    Welcome\r\n                  </Typography>\r\n\r\n                  <Typography variant=\"h4\" className={classes.username}>\r\n                    {loginUser?.[0]?.firstName + ' ' + loginUser?.[0]?.lastName}\r\n                    {/* {loginUser.userId} */}\r\n                    {/* {loginUser?.firstName ?loginUser?.firstName : \"\" + ' ' + loginUser?.lastName ?loginUser?.lastName: \"\"} */}\r\n                  </Typography>\r\n\r\n                  <Typography variant=\"h6\" className={classes.userid}>\r\n                    Last Login: {moment(loginUser?.[0]?.lastLogin).format('MMMM Do YYYY, h:mm')}\r\n                    {/* .slice(0,10) */}\r\n                  </Typography>\r\n                </Grid>\r\n              </Grid>\r\n              {/* <Grid\r\n                                item\r\n                                xs={12}\r\n                                sm={12}\r\n                                md={6}\r\n                                lg={6}\r\n                                xl={6}\r\n                                className={classes.formGrid}\r\n                            >\r\n                                <img\r\n                                    className={classes.img}\r\n                                    src=\"/assets/FIS-Illustration-01.svg\"\r\n                                    alt=\"fis logo\"\r\n                                />\r\n                            </Grid> */}\r\n            </Grid>\r\n          </Card>\r\n          {/* end */}\r\n        </Container>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(withRouter(Welcome));\r\n"]},"metadata":{},"sourceType":"module"}